{"version":3,"sources":["../src/model.next.js","../src/collection.next.js","../src/object.next.js","../src/xhr.next.js","../src/beapi.next.js","../src/beapi.queue.next.js","../src/methods/all.next.js","../src/methods/identity.next.js","../src/methods/objects.next.js","../src/methods/poster.next.js","../src/methods/relation.next.js"],"names":[],"mappings":"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","file":"beapi.js","sourcesContent":["/**\n * A base model to handle BE objects.\n * @class\n */\nexport class BEModel {\n\t/**\n\t * Instantiate config properties.\n\t * @param {Object} conf A configuration set.\n\t * @constructor\n\t */\n\tconstructor(conf) {\n\t\tthis.__config = conf;\n\t\tthis.__modified = [];\n\t}\n\n\t/**\n\t * Get or set configuration params.\n\t * @param {Object} conf An optional set of configuration params.\n\t * @return {Object} The current configuration set.\n\t */\n\t_config(conf) {\n\t\tif (conf) {\n\t\t\tthis.__config = conf;\n\t\t}\n\t\treturn this.__config;\n\t}\n\n\t/**\n\t * Get a list of fields that need to sync with the server or add e new one.\n\t * @param {String|Boolean} key An optional field name which needs to be synced. If `false` is passed, the array will be resetted.\n\t * @return {Array} A list of fields which need to be synced.\n\t */\n\t_modified(key) {\n\t\tif (key === false) {\n\t\t\tthis.__modified = [];\n\t\t} else if (key && this.__modified.indexOf(key) === -1) {\n\t\t\tthis.__modified.push(key);\n\t\t}\n\t\treturn this.__modified;\n\t}\n\n}\n\n/**\n * A base model to handle BE collections.\n * @class\n */\nexport class BEArray extends Array {\n\t/**\n\t * Instantiate items and config properties.\n\t * @param {Array} items A list of `BEModel` objects.\n\t * @param {Object} conf A configuration set.\n\t * @constructor\n\t */\n\tconstructor(items, conf) {\n\t\tsuper(items);\n\t\tthis.__config = conf;\n\t}\n\n\t/**\n\t * Get or set configuration params.\n\t * @param {Object} conf An optional set of configuration params.\n\t * @return {Object} The current configuration set.\n\t */\n\t_config(conf) {\n\t\tif (conf) {\n\t\t\tthis.__config = conf;\n\t\t}\n\t\treturn this.__config;\n\t}\n\n\t/**\n\t * Get a list of fields that need to sync with the server or add e new one.\n\t * @param {String|Boolean} key An optional field name which needs to be synced. If `false` is passed, the array will be resetted.\n\t * @return {Array} A list of fields which need to be synced.\n\t */\n\t_modified(key) {\n\t\tif (key === false) {\n\t\t\tthis.__modified = [];\n\t\t} else if (key && this.__modified.indexOf(key) === -1) {\n\t\t\tthis.__modified.push(key);\n\t\t}\n\t\treturn this.__modified;\n\t}\n\n}\n","import { BEArray } from './model.next.js';\nimport { BEApi } from './beapi.next.js';\nimport { BEApiQueue } from './beapi.queue.next.js';\nimport './methods/all.next.js';\n\nexport class BECollection extends BEArray {\n\n\tconstructor(options = {}, conf = {}) {\n\t\tsuper([], conf);\n\t\tvar items = [];\n        if (options.alias) {\n            this.alias = options.alias;\n\t\t\tif (options.filter) {\n\t\t\t\titems = options.alias.filter(options.filter) || [];\n\t\t\t} else {\n\t\t\t\titems = options.alias.items || [];\n\t\t\t}\n        } else {\n\t\t\titems = options.items || options.objects || [];\n\t\t}\n        this.url = options.url;\n\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\tthis.push(items[i]);\n\t\t}\n\t\tif (items.length < options.count) {\n\t\t\tthis.push({});\n\t\t}\n    }\n\n\tpush(obj) {\n\t\tif (!(obj instanceof BEObject)) {\n\t\t\tobj = new BEObject(obj, this._config());\n\t\t}\n\t\tArray.prototype.push.call(this, obj);\n\t}\n\n    fetch(url) {\n        var that = this;\n        return new Promise(function(resolve, reject) {\n            if (that.url || url) {\n                if (that.alias) {\n                    return that.alias.fetch(that.url || url || undefined);\n                }\n\t\t\t\tthat.splice(0, that.length);\n\t\t\t\tvar beapi = new BEApi(that._config());\n                beapi.get(that.url || url).then(function(res) {\n                    if (res && res.data && res.data.objects) {\n                        for (var i = 0; i < res.data.objects.length; i++) {\n                            var obj = res.data.objects[i];\n\t\t\t\t\t\t\tthat.push(obj);\n                        }\n                    }\n                    resolve.apply(this, arguments);\n                }, function() {\n                    reject.apply(this, arguments);\n                });\n            } else {\n                reject();\n            }\n        });\n    }\n\n\tfilter(f) {\n\t\treturn Array.prototype.filter.call(this, function(item) {\n\t\t\treturn item.is(f);\n\t\t});\n\t}\n\n\ttoArray() {\n\t\treturn Array.prototype.slice.call(this, 0);\n\t}\n}\n","import { BEModel } from './model.next.js';\nimport { BEApi } from './beapi.next.js';\nimport { BEApiQueue } from './beapi.queue.next.js';\nimport './methods/all.next.js';\n\nvar isoDateRegex = /\\d{4,}\\-\\d{2,}\\-\\d{2,}T\\d{2,}:\\d{2,}:\\d{2,}\\+\\d{4,}/;\n\nexport class BEObject extends BEModel {\n\n\tconstructor(data = {}, conf = {}) {\n\t\tsuper(conf);\n        this.set(data);\n    }\n\n    fetch() {\n        var that = this;\n        return new Promise(function(resolve, reject) {\n            if (that.id) {\n                var promise = new BEApi(that._config()).get('objects/' + that.id);\n                promise.then(function(res) {\n                    if (res && res.data && res.data.object) {\n                        that.set(res.data.object);\n\t\t\t\t\t\tthat._modified(false);\n                    } else {\n\t\t\t\t\t\treject(res);\n\t\t\t\t\t}\n                }, function (err) {\n\t\t\t\t\treject(err);\n                });\n                return promise;\n            } else {\n                reject();\n            }\n        });\n    }\n\n\tsave(data = {}) {\n\t\tvar that = this;\n\t\tthis.set(data);\n\t\tvar dataToSend = this.toJSON( this._modified() );\n\t\t\tdataToSend.id = this.id;\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tvar promise = new BEApi(that._config()).post('objects', {\n\t\t\t\tdata: dataToSend\n\t\t\t});\n            promise.then(function(res) {\n                if (res && res.data && res.data.object) {\n                    that.set(res.data.object);\n\t\t\t\t\tthat._modified(false);\n\t\t\t\t\tresolve(res);\n                } else {\n\t\t\t\t\treject(res);\n\t\t\t\t}\n            }, function (err) {\n\t\t\t\treject(err);\n            });\n        });\n\t}\n\n    set(data) {\n        var that = this;\n        var relations = data.relations || {};\n        var children = data.children || {};\n        var relationList = data.relations ? {} : false;\n        var childrenList = data.children ? {} : false;\n\n        var defineRelation = function(name, options) {\n            that.relations[name] = new BECollection(options, that._config());\n        }\n\n        for (var k in relations) {\n            if (!that.relations) {\n                that.relations = {};\n            }\n            defineRelation(k, relations[k]);\n        }\n\n        if (children && !this.children) {\n            this.children = new BECollection({\n                url: children.url,\n                count: children.count\n            }, that._config());\n            if (children.sections) {\n                this.sections = new BECollection({\n                    alias: this.children,\n                    filter: {\n                        object_type: 'Section'\n                    },\n                    url: children.sections.url,\n                    count: children.sections\n                }, that._config());\n            }\n        }\n\n        for (var k in data) {\n            var d = data[k];\n            //check if iso date\n            if (typeof d == 'string' && d.length == 24 && isoDateRegex.test(d)) {\n                var convert = new Date(d);\n                if (!isNaN(convert.valueOf())) {\n                    d = convert;\n                }\n            }\n            if (that[k] !== d) {\n                that[k] = d;\n\t\t\t\tthis._modified(k);\n            }\n        }\n\n        if (data.parent_id) {\n            this.parent = new BEObject({\n                id: data.parent_id\n            });\n            delete this.parent_id;\n        } else {\n            delete this.parent;\n        }\n\n        return that;\n    }\n\n    is(filter) {\n        if (typeof filter == 'object') {\n            for (var k in filter) {\n                if (filter[k] !== this[k]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n\n\tquery() {\n\t\tvar that = this;\n\t\tvar queue = new BEApiQueue(this._config());\n\t\tif ('id' in this && 'nickname' in this) {\n\t\t\tqueue.identity(this);\n\t\t} else {\n\t\t\tqueue.objects(this.id || this.nickname);\n\t\t}\n\t\tqueue.all(function (scope) {\n\t\t\tthat.set(scope);\n\t\t\tthat._modified(false);\n\t\t});\n\t\treturn queue;\n\t}\n\n\ttoJSON(keys) {\n\t\tvar res = {},\n\t\t\tdata = this;\n\t\tfor (var k in data) {\n\t\t\tif (BEObject.unsetFromData.indexOf(k) === -1 && typeof data[k] !== 'function' && (!keys || !Array.isArray(keys) || keys.indexOf(k) !== -1)) {\n\t\t\t\tres[k] = data[k];\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t}\n\n\tstatic get unsetFromData() {\n\t\treturn ['__modified', '__config'];\n\t}\n\n}\n","/**\n * XMLHttpRequest wrapper for the browser.\n * @class\n */\nexport class BEXhr {\n\n\t/**\n\t * Retrieve the Ajax interface.\n\t * The Ajax is used to perform XMLHttpRequest requests.\n\t * By default, the Ajax interface in the browser is the XMLHttpRequest {@link https://developer.mozilla.org/it/docs/Web/API/XMLHttpRequest}.\n\t * while in a Node environment is `xmlhttprequest` {@link https://www.npmjs.com/package/xmlhttprequest}.\n\t * @static\n\t * @return {Object} The Ajax interface.\n\t */\n\tstatic get xhr() {\n\t\tif (this._xhr) {\n\t\t\t// return custom Ajax interface if set\n\t\t\treturn this._xhr;\n\t\t} else {\n\t\t\t// look for node environment\n\t\t\tif ('object' == typeof module && 'object' == typeof module.exports) {\n\t\t\t\t// return node module\n\t\t        return this.xhr = require('xmlhttprequest').XMLHttpRequest;\n\t\t    } else {\n\t\t\t\t// return browser `XMLHttpRequest`\n\t\t        return window.XMLHttpRequest;\n\t\t    }\n\t\t}\n\t}\n\n\t/**\n\t * Set a custom the Ajax interface.\n\t * Set an alternative Ajax interface compatible with a `XMLHttpRequest` like pattern {@link https://developer.mozilla.org/it/docs/Web/API/XMLHttpRequest}.\n\t * @static\n\t * @param {Class} xhr A valid and compatible Ajax interface.\n\t */\n\tstatic set xhr(xhr) {\n\t\tthis._xhr = xhr;\n\t}\n\n\t/**\n\t * Perform an Ajax request.\n\t * Set an alternative Ajax interface compatible with a `XMLHttpRequest` like pattern {@link https://developer.mozilla.org/it/docs/Web/API/XMLHttpRequest}.\n\t * @static\n\t * @param {Object} options A set of options for the Ajax request.\n\t * @return {Promise}\n\t */\n\tstatic exec(options = {}) {\n\t\tvar defaults = {\n\t\t\ttype: 'GET',\n\t\t\tasync: true,\n\t\t\tresponseType: 'json',\n\t\t\theaders: {},\n\t\t\tdata: undefined\n\t\t}\n\t\t// extend defaults with options\n        var opt = {},\n\t\t\tmerge = [defaults, options];\n        for (var i = 0; i < merge.length; i++) {\n            var obj = merge[i];\n            for (var k in obj) {\n                opt[k] = obj[k];\n            }\n        }\n\t\topt.type = opt.type.toUpperCase();\n\t\t// setup a Promise\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\t// instantiate the Ajax interface (@see {@link BEXhr.xhr})\n\t\t\tvar oReq = new BEXhr.xhr();\n\n\t\t\t// done listener\n\t\t\toReq.addEventListener('load', function() {\n\t\t\t\tvar data = oReq.response || oReq.responseText;\n\t\t\t\t// try to convert JSON data into object\n\t\t\t\tif (data) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\t} catch(er) {\n\t\t\t\t\t\t//\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oReq.status >= 200 && oReq.status < 400) {\n\t\t\t\t\tresolve(data);\n\t\t\t\t} else {\n\t\t\t\t\treject(data);\n\t\t\t\t}\n\t\t\t}, false);\n\n\t\t\t// error listeners\n\t\t\toReq.addEventListener('error', function() {\n\t\t\t\treject(oReq);\n\t\t\t}, false);\n\n\t\t\toReq.addEventListener('abort', function() {\n\t\t\t\treject(oReq);\n\t\t\t}, false);\n\n\t\t\toReq.responseType = opt.responseType;\n\n\t\t\t// open the request\n\t\t\toReq.open(opt.type, opt.url, opt.async);\n\t\t\t// set headers\n\t\t\tif (opt.headers && 'object' == typeof opt.headers) {\n\t\t\t\tfor (var k in opt.headers) {\n\t\t\t\t\toReq.setRequestHeader(k, opt.headers[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (opt.type == 'POST' || opt.type == 'PUT' && opt.data !== undefined) {\n\t\t\t\t// if POST or PUT method, send data\n\t\t\t\tvar data = opt.data;\n\t\t\t\tif ('object' == typeof data) {\n\t\t\t\t\tdata = JSON.stringify(data);\n\t\t\t\t}\n\t\t\t\toReq.send(data);\n\t\t\t} else {\n\t\t\t\t// simple request send\n\t\t\t\toReq.send();\n\t\t\t}\n\t\t});\n\t}\n\n}\n","import { BEXhr } from './xhr.next.js';\n\n/**\n * Convenience method to process request arguments\n * - If the argument is String typed, set it as url attribute of a set of options\n * @private\n * @param {String|Object} conf The request arguments.\n * @return {Object} A valid set of options for the request.\n */\nfunction _processInput(conf = {}) {\n\tif (conf) {\n        if (typeof conf == 'string') {\n            conf = { url: conf };\n        }\n        return conf;\n    }\n}\n\n/**\n * Convenience method to extend a JavaScript Object\n * @private\n * @param {Object} res The object to extend.\n * @param {Object} ...args A list of objects to use to extend the first one.\n * @return {Object} The extended object.\n */\nfunction _extend(res = {}, ...args) {\n    for (var i = 0; i < args.length; i++) {\n        var obj = args[i];\n        for (var k in obj) {\n            res[k] = obj[k];\n        }\n    }\n    return res;\n}\n\n/**\n * A registry of BEApi configuration.\n * Everywhere, in your JavaScript application, you can use `BEApiRegistry.getInstance(key)` to retrieve a BEApi configration.\n * Register BEApi configurations is lighter and simpler than register instances.\n * Use BEApiRegistry to share configuration between models, interfaces and queues.\n * @class\n */\nexport class BEApiRegistry {\n\n\t/**\n\t * Add a configuration using the provided key.\n\t * @param {String} key The key to use to register the configuration.\n\t * @param {Object} conf The configuration.\n\t */\n\tstatic add(key, conf = {}) {\n\t\tBEApiRegistry._instances = BEApiRegistry._instances || {};\n\t\tBEApiRegistry._instances[key] = conf;\n\t}\n\n\t/**\n\t * Retrieve a configuration using the provided key.\n\t * @param {String} key The key to use to read the configuration.\n\t * @return {Object} The configuration.\n\t */\n\tstatic getInstance(key) {\n\t\tBEApiRegistry._instances = BEApiRegistry._instances || {};\n\t\tif (typeof BEApiRegistry._instances[key] !== 'undefined') {\n\t\t\treturn BEApiRegistry._instances[key];\n\t\t}\n\t}\n\n\t/**\n\t * Remove a configuration using the provided key.\n\t * @param {String} key The key to use to remove the configuration.\n\t * @return {Boolean} If the configuration exists, return `true` after remotion, otherwise return `false`.\n\t */\n\tstatic remove(key) {\n\t\tBEApiRegistry._instances = BEApiRegistry._instances || {};\n\t\tif (typeof BEApiRegistry._instances[key] !== 'undefined') {\n\t\t\tdelete BEApiRegistry._instances[key];\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n}\n\n/**\n * Create an interface to communicate with a BEdita API frontend.\n * @class\n */\nexport class BEApi {\n\n\t/**\n\t * Instantiate a BEApi Object.\n\t * @constructor\n\t * @param {Object} conf A set of options.\n\t */\n\tconstructor(conf = {}) {\n\t\t/**\n\t\t * A set of options.\n\t\t * @namespace\n\t\t * @property {String} baseUrl \t\t\t\tThe base frontend endpoint.\n\t\t * @property {String} configKey \t\t\tThe registry key to use to store this BEApi configuration (@see {@link BEApiRegistry}).\n\t\t * @property {String} accessTokenKey \t\tThe storage key to use for Access Token when using auth methods.\n\t\t * @property {String} refreshTokenKey\t\tThe storage key to use for Refresh Token when using auth methods.\n\t\t * @property {String} accessTokenExpireDate The storage key to use for Access Token Expire Date when using auth methods.\n\t\t */\n\t\tvar opt = {\n\t\t\tbaseUrl: undefined,\n\t\t\taccessTokenKey: 'be_access_token',\n\t\t    refreshTokenKey: 'be_refresh_token',\n\t\t    accessTokenExpireDate: 'be_access_token_expire_date',\n\t\t\tconfigKey: this.defaultConfigKey\n\t\t}\n\n        for (var k in conf) {\n            opt[k] = conf[k];\n        }\n\n\t\t// if the base url is not provided, try to extract it from the `window.location`.\n\t\tif (!opt.baseUrl) {\n\t\t\ttry {\n\t\t        opt.baseUrl = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + '/api/latest/';\n\t\t    } catch (ex) {\n\t\t        throw 'Missing valid `baseUrl`.';\n\t    \t}\n\t\t}\n\n\t\tthis.conf = opt;\n\t\t// add the current configuration to the BEApiRegistry.\n\t\tBEApiRegistry.add(this.configKey, this.conf);\n\t}\n\n\t/**\n\t * The default register configuration key.\n\t * @type {String}\n\t */\n\tget defaultConfigKey() {\n\t\treturn 'default';\n\t}\n\n\t/**\n\t * Return the chosen registry configuration key or the default one.\n\t * @type {String}\n\t * @default 'default'\n\t */\n\tget configKey() {\n\t\treturn (this.conf && this.conf.configKey) || this.defaultConfigKey;\n\t}\n\n\t/**\n\t * Get instance configuration object.\n\t * @type {object}\n\t */\n\tgetConfiguration() {\n\t\treturn this.conf;\n\t}\n\n\t/**\n\t * Process and return a complete set of options for the Ajax request.\n\t * - Automatically set the authorization headers\n\t * - Automatically set the frontend base url when a not full url is passed\n\t * @private\n\t * @param {Object} opt A set of options to pass to the Ajax request.\n\t * @return {Object} A complete set of options.\n\t */\n\t_processOptions(opt) {\n\t\tvar res = this.conf;\n\t\tfor (var k in opt) {\n            res[k] = opt[k];\n        }\n\n\t\tvar url = res.url || '/',\n\t\t\taccessToken = this.getAccessToken();\n\n\t\t// check if the provided url is a complete\n\t\tif (/^([\\w\\-]+:)?\\/{2,3}/.test(url)) {\n\t\t\t// check if the provided is url is valid (hostname == BEdita frontend host)\n\t\t\tif (url.indexOf(res.baseUrl) !== 0) {\n\t\t\t\tthrow 'Invalid url';\n\t\t\t}\n\t\t} else if (url[0] !== '/') {\n\t\t\turl = res.baseUrl + ((res.baseUrl[res.baseUrl.length - 1]) == '/' ? url : '/' + url);\n\t\t} else {\n\t\t\turl = res.baseUrl + ((res.baseUrl[res.baseUrl.length - 1]) == '/' ? url.slice(1) : url);\n\t\t}\n\n\t\tres['url'] = url;\n\n\t\tif (accessToken) {\n\t\t\tres['headers'] = (res['headers'] && 'object' == typeof res['headers']) ? res['headers'] : {};\n\t\t\tres['headers']['Authorization'] = 'Bearer ' + accessToken;\n\t\t}\n\n\t\tres.type = res.method = res.type || res.method || 'GET';\n\n\t\treturn res;\n\t}\n\n\t/**\n\t * Perform the Ajax request.\n\t * - If Access Tokens is expired, try to renew it before perform the request\n\t * - Use {@link BEXhr}\n\t * @private\n\t * @param {Object} opt A complete set of options to pass to the Ajax request.\n\t * @return {Promise} The Ajax request Promise.\n\t */\n\t_processXHR(opt = {}) {\n        if (this.getAccessToken() && this.isTokenExpired()) {\n            return new Promise(function(resolve, reject) {\n                var doXHR = function() {\n                    delete opt.headers['Authorization'];\n                    opt = this._processOptions(opt);\n                    BEXhr.exec(opt).then(function() {\n                        resolve.apply(this, arguments);\n                    }, function() {\n                        reject.apply(this, arguments);\n                    });\n                }\n                this.refreshToken().then(doXHR, doXHR);\n            });\n        } else {\n            return BEXhr.exec(opt);\n        }\n    }\n\n\t/**\n\t * Perform the Ajax request for Authentication.\n\t * - Automatically store Access Token, Refresh Token and Expire Date to the storage (@see {@link BEApi.storage}).\n\t * @private\n\t * @param {Object} opt A complete set of options to pass to the Ajax request.\n\t * @return {Promise} The Ajax request Promise.\n\t */\n\t_processAuth(opt = {}) {\n        opt.url = 'auth';\n        var self = this,\n\t\t\tstorage = BEApi.storage,\n\t\t\tconf = this.conf,\n\t\t\tpromise = this.post(opt);\n        promise.then(function(res) {\n            if (res && res.data && res.data.access_token) {\n                storage.setItem(conf.accessTokenKey, res.data.access_token);\n                storage.setItem(conf.refreshTokenKey, res.data.refresh_token);\n                storage.setItem(conf.accessTokenExpireDate, Date.now() + res.data.expires_in * 1000);\n            } else {\n                storage.removeItem(conf.accessTokenKey);\n                storage.removeItem(conf.refreshTokenKey);\n                storage.removeItem(conf.accessTokenExpireDate);\n            }\n        }, function() {\n            storage.removeItem(conf.accessTokenKey);\n            storage.removeItem(conf.refreshTokenKey);\n            storage.removeItem(conf.accessTokenExpireDate);\n        });\n        return promise;\n    }\n\n\t/**\n\t * Convenience method to set the BEdita API frontend base url.\n\t * @param {String} url The url to set.\n\t * @return {Object} The BEApi instance.\n\t */\n\tsetBaseUrl(url) {\n\t\tthis.conf.baseUrl = url;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Perform an API GET request.\n\t * - Automatically set `GET` as request method.\n\t * - Use {@link _processOptions} and {@link _processOptions}\n\t * @param {Object} conf A set of options to pass to the Ajax request.\n\t * @return {Promise} The Ajax request Promise.\n\t */\n\tget(opt = {}) {\n        opt = _processInput(opt);\n        opt.type = 'GET';\n        opt = this._processOptions(opt);\n        return this._processXHR(opt);\n    }\n\n\t/**\n\t * Perform an API POST request.\n\t * - Automatically set `POST` as request method.\n\t * - Use {@link _processOptions} and {@link _processOptions}\n\t * @param {Object} conf A set of options to pass to the Ajax request.\n\t * @return {Promise} The Ajax request Promise.\n\t */\n    post(opt = {}, data) {\n        opt = _processInput(opt);\n        opt.data = data ? _extend(opt.data || {}, data) : opt.data;\n        opt.type = 'POST';\n        opt = this._processOptions(opt);\n        return this._processXHR(opt);\n    }\n\n\t/**\n\t * Perform an API PUT request.\n\t * - Automatically set `PUT` as request method.\n\t * - Use {@link _processOptions} and {@link _processOptions}\n\t * @param {Object} conf A set of options to pass to the Ajax request.\n\t * @return {Promise} The Ajax request Promise.\n\t */\n    put(opt = {}, data) {\n        opt = _processInput(opt);\n        opt.data = data ? _extend(opt.data || {}, data) : opt.data;\n        opt.type = 'PUT';\n        opt = this._processOptions(opt);\n        return this._processXHR(opt);\n    }\n\n\t/**\n\t * Perform an API DELETE request.\n\t * - Automatically set `DELETE` as request method.\n\t * - Use {@link _processOptions} and {@link _processOptions}\n\t * @param {Object} conf A set of options to pass to the Ajax request.\n\t * @return {Promise} The Ajax request Promise.\n\t */\n    delete(opt = {}) {\n        opt = _processInput(opt);\n        opt.type = 'DELETE';\n        opt = this._processOptions(opt);\n        return this._processXHR(opt);\n    }\n\n\t/**\n\t * Perform an API Auth request.\n\t * - Use {@link _processAuth}\n\t * - Automatically store Access Token to the storage (@see {@link BEApi.storage}).\n\t * @param {String} username The username.\n\t * @param {String} password The user's password.\n\t * @return {Promise} The Ajax request Promise.\n\t */\n\tauth(username, password) {\n        var conf = {\n            data: {\n                username: username,\n                password: password\n            }\n        }\n        return this._processAuth(conf);\n    }\n\n\t/**\n\t * Perform an API Refresh Token request.\n\t * - Use {@link _processAuth}\n\t * - Retrieve Access Token from the storage (@see {@link BEApi.storage}).\n\t * @return {Promise} The Ajax request Promise.\n\t */\n    refreshToken() {\n\t\tvar storage = BEApi.storage,\n\t\t\tconf = this.conf,\n        \topt = {\n\t            data: {\n\t                grant_type: 'refresh_token',\n\t                refresh_token: this.getRefreshToken(),\n\t            }\n\t        }\n        storage.removeItem(conf.accessTokenKey);\n        storage.removeItem(conf.accessTokenExpireDate);\n        return this._processAuth(opt);\n    }\n\n\t/**\n\t * Perform an API Logout request.\n\t * - Remove all BEApi data from the storage (@see {@link BEApi.storage}).\n\t * @return {Promise} The Ajax request Promise.\n\t */\n    logout() {\n\t\tvar storage = BEApi.storage,\n\t\t\topt = this.conf,\n        \tpromise = this.delete({\n                url: 'auth/' + this.getRefreshToken()\n            });\n        storage.removeItem(opt.accessTokenKey);\n        storage.removeItem(opt.accessTokenExpireDate);\n\n        var onLogout = function(res) {\n            if (res && res.data && res.data.logout) {\n                storage.removeItem(opt.refreshTokenKey);\n            }\n        }\n        promise.then(onLogout, onLogout);\n        return promise;\n    }\n\n\t/**\n\t * Retrieve Access Token from the storage (@see {@link BEApi.storage}).\n\t * @return {String} The Access Token\n\t */\n    getAccessToken() {\n        return BEApi.storage.getItem(this.conf.accessTokenKey) || undefined;\n    }\n\n\t/**\n\t * Retrieve Refresh Token from the storage (@see {@link BEApi.storage}).\n\t * @return {String} The Refresh Token\n\t */\n    getRefreshToken() {\n        return BEApi.storage.getItem(this.conf.refreshTokenKey) || undefined;\n    }\n\n\t/**\n\t * Retrieve Access Token Expire Date from the storage (@see {@link BEApi.storage}).\n\t * @return {Date} The Access Token Expire Date\n\t */\n    getAccessTokenExpireDate() {\n        var data = BEApi.storage.getItem(this.conf.accessTokenExpireDate);\n        if (data) {\n            data = parseInt(data);\n            return new Date(data);\n        }\n    }\n\n\t/**\n\t * Check if Access Token is expired\n\t * @return {Boolean} If token is expired, return `true`, otherwise `false`\n\t */\n    isTokenExpired() {\n        return new Date() >= this.getAccessTokenExpireDate();\n    }\n\n\t/**\n\t * Retrieve the storage interface.\n\t * The storage is used to save access and refresh tokens.\n\t * By default, the storage interface in the browser is the localStorage {@link https://developer.mozilla.org/it/docs/Web/API/Window/localStorage}\n\t * while in a Node environment is `node-localstorage` {@link https://www.npmjs.com/package/node-localstorage}\n\t * @static\n\t * @return {Object} The storage interface\n\t */\n\tstatic get storage() {\n\t\tif (this._storage) {\n\t\t\treturn this._storage;\n\t\t}\n\t\tif ('object' == typeof module && 'object' == typeof module.exports) {\n\t        var LocalStorage = require('node-localstorage').LocalStorage;\n\t        return BEApi.storage = new LocalStorage('./beapi');\n\t    } else if ('undefined' !== typeof localStorage) {\n\t        return BEApi.storage = window.localStorage;\n\t    }\n\t}\n\n\t/**\n\t * Set a custom the storage interface.\n\t * Set an alternative storage interface with the same LocalStorage API (`setItem`, `getItem` and `removeItem`)\n\t * @static\n\t */\n\tstatic set storage(storage) {\n\t\tif (typeof storage['setItem'] === 'function' && typeof storage['getItem'] === 'function' && typeof storage['removeItem'] === 'function') {\n\t\t\tthis._storage = storage;\n\t\t} else {\n\t\t\tthrow 'Invalid custom storage.'\n\t\t}\n\t}\n\n\t/**\n\t * Retrieve the Ajax interface.\n\t * The Ajax is used to perform XMLHttpRequest requests.\n\t * By default, the Ajax interface in the browser is the XMLHttpRequest {@link https://developer.mozilla.org/it/docs/Web/API/XMLHttpRequest}\n\t * while in a Node environment is `xmlhttprequest` {@link https://www.npmjs.com/package/xmlhttprequest}\n\t * @static\n\t * @return {Object} The Ajax interface\n\t */\n\tstatic get xhr() {\n\t\treturn BEXhr.xhr;\n\t}\n\n\t/**\n\t * Set a custom the Ajax interface.\n\t * Set an alternative Ajax interface compatible with a `jQuery.ajax` like pattern {@link http://api.jquery.com/jquery.ajax/}\n\t * @static\n\t * @param {Class} xhr A valid and compatible Ajax interface.\n\t */\n\tstatic set xhr(xhr) {\n\t\tBEXhr.xhr = xhr;\n\t}\n\n}\n","import { BEApi } from './beapi.next.js';\n\nvar noop = function () {}\n\n/**\n * Create a task model to insert into a BEApiQueue.\n * @class\n */\nexport class BEApiQueueTask {\n\n\t/**\n\t * Instantiate a BEApiQueueTask Object.\n\t * @constructor\n\t * @param {Function} method A BEApiQueue Method class constructor.\n\t * @param {Array} args The list of arguments to pass to the BEApiQueue Method constructor\n\t */\n\tconstructor(method, args = []) {\n\t\tvar self = this;\n\t\tif (method) {\n\t\t\tself.fn = method;\n\t\t}\n\t\tif (args) {\n\t\t\tself.args = args;\n\t\t}\n\t\t// instantiate the task local promise\n\t\tself.promise = new Promise(function (resolve, reject) {\n\t\t\tself.resolve = resolve;\n\t\t\tself.reject = reject;\n\t\t});\n\t}\n\n}\n\n/**\n * Create a chainable queue of BEApi requests.\n * @class\n */\nexport class BEApiQueue {\n\n\t/**\n\t * Instantiate a BEApiQueue Object.\n\t * @constructor\n\t * @param {String|Object|BEApi} conf A set of options or a configuration key for BEApiRegistry.\n\t */\n\tconstructor(conf) {\n\t\tvar that = this;\n\t\tif (typeof conf === 'string') {\n\t\t\t// if conf is a string, try to read configuration from BEApiRegistry\n\t\t\tthis.conf = BEApiRegistry.getInstance(conf);\n\t\t} else if (conf instanceof BEApi) {\n\t\t\t// if conf is a BEApi instance, grab the configuration with `BEApi.getConfiguration` method\n\t\t\tthis.conf = conf.getConfiguration();\n\t\t} else if (typeof conf === 'object') {\n\t\t\t// if conf is a plain object, use it\n\t\t\tthis.conf = conf;\n\t\t} else {\n\t\t\tthrow 'No BEApi configuration provided.'\n\t\t}\n\t\t// setup the global promise and resolvers\n\t\tthis._promise = new Promise(function (resolve, reject) {\n\t\t\tthat._resolver = resolve;\n\t\t\tthat._rejecter = reject;\n\t\t});\n\t\tthis.reset();\n\t}\n\n\t/**\n\t * Reset the queue.\n\t * @return {BEApiQueue} the instance\n\t */\n\treset() {\n\t\tthis.queue = [];\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a BEApiQueueTask instance to the queue.\n\t * @param {BEApiQueueTask} task\n\t * @return {BEApiQueue} the instance\n\t */\n\tadd(task) {\n\t\tthis.queue.push(task);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Perform the queue of requests.\n\t * @return {Promise} the global promise\n\t */\n\texec() {\n\t\tvar self = this,\n\t\t\tqueue = this.queue,\n\t\t\tbeapi = new BEApi(this.conf),\n\t\t\tscope;\n\n\t\t// let's start the queue!\n\t\t_exec(queue);\n\n\t\tfunction _exec(queue, index) {\n\t\t\tindex = index || 0;\n\t\t\tif (index == queue.length) {\n\t\t\t\t// if iterator reached the end of the queue, resolve the global promise\n\t\t\t\treturn self._resolver(scope);\n\t\t\t}\n\t\t\tvar task = queue[index],\n\t\t\t\tmethod = task.fn,\n\t\t\t\targs = task.args,\n\t\t\t\tresolver = task.resolve,\n\t\t\t\trejecter = task.reject,\n\t\t\t\tpromise = task.promise,\n\t\t\t\ttraskInstance = new BEApiQueue.tasks[method](...args);\n\n\t\t\t// process the input arguments using task instance `input` method\n\t\t\ttraskInstance.input.call(traskInstance, scope).then(function (options) {\n\t\t\t\t// perform the Ajax request using the BEApi instance\n\t\t\t\t// `done` and `fail` callbacks both will be process by the local `onLoad` function\n\t\t\t\tlet ajaxMethod = traskInstance.type.toLowerCase();\n\t\t\t\tif (typeof beapi[ajaxMethod] == 'function') {\n\t\t\t\t\tbeapi[ajaxMethod].apply(beapi, options).then(onLoad, onLoad);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfunction onLoad (res) {\n\t\t\t\t// validate the request result using task instance `validate` method\n\t\t\t\ttraskInstance.validate(res).then(function () {\n\t\t\t\t\t// if validation is succeeded, process the result using task instance `transform` method.\n\t\t\t\t\t// The `transform` function of a BEApiQueue Method performs some changes to the request result\n\t\t\t\t\t// and to the scope object.\n\t\t\t\t\ttraskInstance.transform(scope, res).then(function (obj) {\n\t\t\t\t\t\t// update the scope\n\t\t\t\t\t\tscope = obj;\n\t\t\t\t\t\t// resolve the task promise\n\t\t\t\t\t\tresolver(scope);\n\t\t\t\t\t\t// execute the next task!\n\t\t\t\t\t\t_exec(queue, index + 1);\n\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\t// if transformation fails, reject both task and global promises and stop the queue\n\t\t\t\t\t\trejecter(scope);\n\t\t\t\t\t\tself._rejecter(err);\n\t\t\t\t\t});\n\t\t\t\t}, function (err) {\n\t\t\t\t\t// if validation fails, reject both task and global promises and stop the queue\n\t\t\t\t\trejecter(scope);\n\t\t\t\t\tself._rejecter(err);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn this._promise;\n\t}\n\n\t/**\n\t * Alias of `BEApiQueue.exec`.\n\t * @see {@link BEApiQueue.exec}\n\t */\n\tget() {\n\t\treturn this.exec();\n\t}\n\n\t/**\n\t * Get the first task in queue.\n\t * @return {BEApiQueueTask} The first task.\n\t */\n\tfirst() {\n\t\tif (this.queue.length) {\n\t\t\treturn this.queue[0];\n\t\t}\n\t}\n\n\t/**\n\t * Get the last task in queue.\n\t * @return {BEApiQueueTask} The last task.\n\t */\n\tlast() {\n\t\tif (this.queue.length) {\n\t\t\treturn this.queue[this.queue.length - 1];\n\t\t}\n\t}\n\n\t/**\n\t * Alias of the last task in queue `promise.then`.\n\t * Attach a success and/or fail callback to the last added task.\n\t * If the queue is empty, the method `BEApiQueue.all` {@link BEApiQueue.all} is called instead.\n\t * @param {Function} done The success callback [optional].\n\t * @param {Function} fail The fail callback [optional].\n\t * @return {Promise} The last task promise or the global promise.\n\t */\n\tthen(done, fail) {\n\t\tif (this.queue.length) {\n\t\t\treturn this.last().promise.then(done || noop, fail || noop);\n\t\t} else {\n\t\t\treturn this.all(done || noop, fail || noop);\n\t\t}\n\t}\n\n\t/**\n\t * Alias of the global `promise.then`.\n\t * Attach a success and/or fail callback to the global queue promise.\n\t * @param {Function} done The success callback [optional].\n\t * @param {Function} fail The fail callback [optional].\n\t * @return {Promise} The global promise.\n\t */\n\tall(done, fail) {\n\t\tif (this._promise) {\n\t\t\treturn this._promise.then(done || noop, fail || noop);\n\t\t}\n\t}\n\n\t/**\n\t * Attach a method to the `BEApiQueue.prototype`.\n\t * The attached method should be an instance of `BEApiQueueBaseMethod`.\n\t * @param {String} taskName The name of the function attached to the prototype.\n\t * @param {BEApiQueueBaseMethod} def The method class.\n\t */\n\tstatic register(taskName, def) {\n\t\tif (taskName && typeof BEApiQueue.prototype[taskName] !== 'undefined') {\n\t\t\tthrow 'Reserved method';\n\t\t}\n\n\t\tBEApiQueue.tasks = BEApiQueue.tasks || {};\n\t\tBEApiQueue.tasks[taskName] = def;\n\n\t\t(function (method) {\n\t\t\tBEApiQueue.prototype[method] = function (...args) {\n\t\t\t\tthis.add(new BEApiQueueTask(method, args));\n\t\t\t\treturn this;\n\t\t\t}\n\t\t})(taskName);\n\t}\n}\n\n/**\n * Abstract class for `BEApiQueue Method`s.\n * @class\n */\nexport class BEApiQueueBaseMethod {\n\n\t/**\n\t * The HTTP method of the request.\n\t * @type {String}\n\t * @default 'get'\n\t */\n\tget type() {\n\t\treturn 'get';\n\t}\n\n\t/**\n\t * Initialize a `BEApiQueue Method`.\n\t * @constructor\n\t */\n\tconstructor(options = {}) {\n\t\tthis.options = options;\n\t}\n\n\t/**\n\t * Arguments input processor.\n\t * @param {Object} scope The scope for the queue.\n\t * @param {*} args All the arguments passed to the method when invoked in queue.\n\t * @return {Promise} A promise resolved when all inputs are processed.\n\t */\n\tinput(scope, ...args) {\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve(args);\n\t\t});\n\t}\n\n\t/**\n\t * Validate the result of a request response.\n\t * @param {Object} res The request response.\n\t * @return {Promise} A promise resolved when the response is validated.\n\t */\n\tvalidate(res) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (res && res.data && (!res.status || (res.status >= 200 && res.status < 300))) {\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Transform the result of a request response.\n\t * @param {Object} scope The scope for the queue.\n\t * @param {Object} res The request response.\n\t * @return {Promise} A promise resolved when scope changes are finished.\n\t */\n\ttransform(scope, res) {\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve(scope);\n\t\t});\n\t}\n\n}\n","import './identity.next.js';\nimport './objects.next.js';\nimport './relation.next.js';\nimport './poster.next.js';\n","import { BEApiQueue, BEApiQueueBaseMethod } from '../beapi.queue.next.js';\n\nexport class BEApiQueueIdentity extends BEApiQueueBaseMethod {\n\n\tconstructor(data) {\n\t\tsuper({\n\t\t\tid: data.id,\n\t\t\tdata: data\n\t\t});\n\t}\n\n\tvalidate() {\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve();\n\t\t});\n\t}\n\n\tinput(scope) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve([\n\t\t\t\t{\n\t\t\t\t\turl: '/'\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t}\n\n\ttransform(scope, res) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tresolve(self.options.data);\n\t\t});\n\t}\n\n}\n\nBEApiQueue.register('identity', BEApiQueueIdentity);\n","import { BEApiQueue, BEApiQueueBaseMethod } from '../beapi.queue.next.js';\n\nclass BEApiQueueObjects extends BEApiQueueBaseMethod {\n\n\tconstructor(id, type) {\n\t\tsuper({\n\t\t\tid: id,\n\t\t\ttype: type\n\t\t});\n\t}\n\n\tinput(scope) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve([\n\t\t\t\t{\n\t\t\t\t\turl: (self.options.type ? self.options.type + 's' : 'objects') + (self.options.id ? '/' + self.options.id : '')\n\t\t\t\t}\n\t\t\t]);\n\t\t})\n\t}\n\n\ttransform(scope, res) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (res.data.object) {\n\t\t\t\tscope = res.data.object;\n\t\t\t}\n\t\t\tresolve(scope);\n\t\t});\n\t}\n\n}\n\nBEApiQueue.register('objects', BEApiQueueObjects);\n","import { BEApiQueue, BEApiQueueBaseMethod } from '../beapi.queue.next.js';\n\nclass BEApiQueuePoster extends BEApiQueueBaseMethod {\n\n\tconstructor(options = {}) {\n\t\tsuper(options);\n\t}\n\n\tinput(scope) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve) {\n\t\t\tvar suffix = '';\n\t\t\tif (self.options) {\n\t\t\t\tsuffix = '?';\n\t\t\t\tfor (var k in self.options) {\n\t\t\t\t\tsuffix += k + '=' + self.options[k];\n\t\t\t\t}\n\t\t\t}\n\t\t\tresolve([\n\t\t\t\t{\n\t\t\t\t\turl: 'poster/' + scope.id + suffix\n\t\t\t\t}\n\t\t\t]);\n\t\t})\n\t}\n\n\ttransform(scope, res) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (res && res.data) {\n\t\t\t\tscope['poster'] = res.data;\n\t\t\t}\n\t\t\tresolve(scope);\n\t\t});\n\t}\n\n}\n\nBEApiQueue.register('poster', BEApiQueuePoster);\n","import { BEApiQueue, BEApiQueueBaseMethod } from '../beapi.queue.next.js';\n\nclass BEApiQueueRelation extends BEApiQueueBaseMethod {\n\n\tconstructor(relName) {\n\t\tsuper({\n\t\t\trelName: relName\n\t\t});\n\t}\n\n\tinput(scope) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve([\n\t\t\t\t{\n\t\t\t\t\turl: 'objects/' + scope.id + '/relations/' + self.options.relName\n\t\t\t\t}\n\t\t\t]);\n\t\t})\n\t}\n\n\ttransform(scope, res) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tscope['relations'] = scope['relations'] || {};\n\t\t\tscope['relations'][self.options.relName] = scope['relations'][self.options.relName] || {};\n\t\t\tscope['relations'][self.options.relName].objects = res.data.objects;\n\t\t\tresolve(scope);\n\t\t});\n\t}\n\n}\n\nBEApiQueue.register('relation', BEApiQueueRelation);\n"]}
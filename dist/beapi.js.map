{"version":3,"sources":["../src/model.next.js","../src/collection.next.js","../src/object.next.js","../src/xhr.next.js","../src/beapi.next.js","../src/beapi.queue.next.js","../src/methods/all.next.js","../src/methods/identity.next.js","../src/methods/objects.next.js","../src/methods/poster.next.js","../src/methods/relation.next.js"],"names":[],"mappings":"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","file":"beapi.js","sourcesContent":["export class BEModel {\n\n\tconstructor(conf) {\n\t\tthis.conf = conf;\n\t}\n\n\tconfig(conf) {\n\t\tthis.conf = conf;\n\t}\n\n}\n\nexport class BEArray extends Array {\n\n\tconstructor(items, conf) {\n\t\tsuper(items);\n\t\tthis.conf = conf;\n\t}\n\n\tconfig(conf) {\n\t\tthis.conf = conf;\n\t}\n\n}\n","import { BEArray } from './model.next.js';\nimport { BEApi } from './beapi.next.js';\nimport { BEApiQueue } from './beapi.queue.next.js';\nimport './methods/all.next.js';\n\nexport class BECollection extends BEArray {\n\n\tconstructor(options = {}, conf = {}) {\n\t\tsuper([], conf);\n\t\tvar items;\n        if (options.alias) {\n            this.alias = options.alias;\n\t\t\tif (options.filter) {\n\t\t\t\titems = options.alias.filter(options.filter) || [];\n\t\t\t} else {\n\t\t\t\titems = options.alias.items || [];\n\t\t\t}\n        } else {\n\t\t\titems = options.items || options.objects || [];\n\t\t}\n        this.url = options.url;\n\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\tthis.push(items[i]);\n\t\t}\n\t\tif (items.length < options.count) {\n\t\t\tthis.push({});\n\t\t}\n    }\n\n\tpush(obj) {\n\t\tif (!(obj instanceof BEObject)) {\n\t\t\tobj = new BEObject(obj, this.conf);\n\t\t}\n\t\tArray.prototype.push.call(this, obj);\n\t}\n\n    fetch(url) {\n        var that = this;\n        return new Promise(function(resolve, reject) {\n            if (that.url || url) {\n                if (that.alias) {\n                    return that.alias.fetch(that.url || url || undefined);\n                }\n\t\t\t\tthat.splice(0, that.length);\n\t\t\t\tvar beapi = new BEApi(that.conf);\n                beapi.get(that.url || url).then(function(res) {\n                    if (res && res.data && res.data.objects) {\n                        for (var i = 0; i < res.data.objects.length; i++) {\n                            var obj = res.data.objects[i];\n\t\t\t\t\t\t\tthat.push(obj);\n                        }\n                    }\n                    resolve.apply(this, arguments);\n                }, function() {\n                    reject.apply(this, arguments);\n                });\n            } else {\n                reject();\n            }\n        });\n    }\n\n\tfilter(f) {\n\t\treturn Array.prototype.filter.call(this, function(item) {\n\t\t\treturn item.is(f);\n\t\t});\n\t}\n}\n","import { BEModel } from './model.next.js';\nimport { BEApi } from './beapi.next.js';\nimport { BEApiQueue } from './beapi.queue.next.js';\nimport './methods/all.next.js';\n\nvar isoDateRegex = /\\d{4,}\\-\\d{2,}\\-\\d{2,}T\\d{2,}:\\d{2,}:\\d{2,}\\+\\d{4,}/;\n\nexport class BEObject extends BEModel {\n\n\tconstructor(data = {}, conf = {}) {\n\t\tsuper(conf);\n        this.set(data);\n    }\n\n    fetch() {\n        var that = this;\n        return new Promise(function(resolve, reject) {\n            if (that.id) {\n                var promise = new BEApi(that.conf).get('objects/' + that.id);\n                promise.then(function(res) {\n                    if (res && res.data && res.data.object) {\n                        that.set(res.data.object);\n                    }\n                });\n                return promise;\n            } else {\n                reject();\n            }\n        });\n    }\n\n    set(data) {\n        var that = this;\n        var relations = data.relations || {};\n        var children = data.children || {};\n        var relationList = data.relations ? {} : false;\n        var childrenList = data.children ? {} : false;\n\n        var defineRelation = function(name, options) {\n            that.relations[name] = new BECollection(options, that.conf);\n        }\n\n        for (var k in relations) {\n            if (!that.relations) {\n                that.relations = {};\n            }\n            defineRelation(k, relations[k]);\n        }\n\n        if (children && !this.children) {\n            this.children = new BECollection({\n                url: children.url,\n                count: children.count\n            }, that.conf);\n            if (children.sections) {\n                this.sections = new BECollection({\n                    alias: this.children,\n                    filter: {\n                        object_type: 'Section'\n                    },\n                    url: children.sections.url,\n                    count: children.sections\n                }, that.conf);\n            }\n        }\n\n        for (var k in data) {\n            var d = data[k];\n            //check if iso date\n            if (typeof d == 'string' && d.length == 24 && isoDateRegex.test(d)) {\n                var convert = new Date(d);\n                if (!isNaN(convert.valueOf())) {\n                    d = convert;\n                }\n            }\n            if (that[k] !== d) {\n                that[k] = d;\n            }\n        }\n\n        if (data.parent_id) {\n            this.parent = new BEObject({\n                id: data.parent_id\n            });\n            delete this.parent_id;\n        } else {\n            delete this.parent;\n        }\n\n        return that;\n    }\n\n    is(filter) {\n        if (typeof filter == 'object') {\n            for (var k in filter) {\n                if (filter[k] !== this[k]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n\n\tquery() {\n\t\tvar that = this;\n\t\tvar queue = new BEApiQueue(this.conf);\n\t\tif ('id' in this && 'nickname' in this) {\n\t\t\tqueue.identity(this);\n\t\t} else {\n\t\t\tqueue.objects(this.id || this.nickname);\n\t\t}\n\t\tqueue.all(function (scope) {\n\t\t\tthat.set(scope);\n\t\t});\n\t\treturn queue;\n\t}\n\n}\n","export class BEXhr {\n\n\tstatic get xhr() {\n\t\tif (this._xhr) {\n\t\t\treturn this._xhr;\n\t\t} else {\n\t\t\tif ('object' == typeof module && 'object' == typeof module.exports) {\n\t\t        return this.xhr = require('xmlhttprequest').XMLHttpRequest;\n\t\t    } else {\n\t\t        return window.XMLHttpRequest;\n\t\t    }\n\t\t}\n\t}\n\n\tstatic set xhr(xhr) {\n\t\tthis._xhr = xhr;\n\t}\n\n\tstatic exec(options = {}) {\n\t\tvar defaults = {\n\t\t\ttype: 'GET',\n\t\t\tasync: true,\n\t\t\tresponseType: 'json',\n\t\t\theaders: {},\n\t\t\tdata: undefined\n\t\t}\n\n        var opt = {},\n\t\t\tmerge = [defaults, options];\n        for (var i = 0; i < merge.length; i++) {\n            var obj = merge[i];\n            for (var k in obj) {\n                opt[k] = obj[k];\n            }\n        }\n\t\topt.type = opt.type.toUpperCase();\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tvar oReq = new BEXhr.xhr();\n\n\t\t\toReq.addEventListener('load', function() {\n\t\t\t\tvar data = oReq.response || oReq.responseText;\n\t\t\t\tif (data) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\t} catch(er) {\n\t\t\t\t\t\t//\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oReq.status >= 200 && oReq.status < 400) {\n\t\t\t\t\tresolve(data);\n\t\t\t\t} else {\n\t\t\t\t\treject(data);\n\t\t\t\t}\n\t\t\t}, false);\n\n\t\t\toReq.addEventListener('error', function() {\n\t\t\t\treject(oReq);\n\t\t\t}, false);\n\n\t\t\toReq.addEventListener('abort', function() {\n\t\t\t\treject(oReq);\n\t\t\t}, false);\n\n\t\t\toReq.responseType = opt.responseType;\n\t\t\toReq.open(opt.type, opt.url, opt.async);\n\t\t\tif (opt.headers && 'object' == typeof opt.headers) {\n\t\t\t\tfor (var k in opt.headers) {\n\t\t\t\t\toReq.setRequestHeader(k, opt.headers[k]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (opt.type == 'POST' || opt.type == 'PUT' && opt.data !== undefined) {\n\t\t\t\tvar data = opt.data;\n\t\t\t\tif ('object' == typeof data) {\n\t\t\t\t\tdata = JSON.stringify(data);\n\t\t\t\t}\n\t\t\t\toReq.send(data);\n\t\t\t} else {\n\t\t\t\toReq.send();\n\t\t\t}\n\t\t});\n\t}\n\n}\n","import { BEXhr } from './xhr.next.js';\n\nfunction processInput(conf = {}) {\n\tif (conf) {\n        if (typeof conf == 'string') {\n            conf = { url: conf };\n        }\n        return conf;\n    }\n}\n\nexport class BEApiRegistry {\n\n\tstatic add(key, conf = {}) {\n\t\tBEApiRegistry._instances = BEApiRegistry._instances || {};\n\t\tBEApiRegistry._instances[key] = conf;\n\t}\n\n\tstatic getInstance(key) {\n\t\tBEApiRegistry._instances = BEApiRegistry._instances || {};\n\t\tif (typeof BEApiRegistry._instances[key] !== 'undefined') {\n\t\t\treturn BEApiRegistry._instances[key];\n\t\t}\n\t}\n\n\tstatic remove(key) {\n\t\tBEApiRegistry._instances = BEApiRegistry._instances || {};\n\t\tif (typeof BEApiRegistry._instances[key] !== 'undefined') {\n\t\t\tdelete BEApiRegistry._instances[key];\n\t\t}\n\t}\n\n}\n\nexport class BEApi {\n\n\tstatic get storage() {\n\t\tif (this._storage) {\n\t\t\treturn this._storage;\n\t\t}\n\t\tif ('object' == typeof module && 'object' == typeof module.exports) {\n\t        var LocalStorage = require('node-localstorage').LocalStorage;\n\t        return BEApi.storage = new LocalStorage('./beapi');\n\t    } else if ('undefined' !== typeof localStorage) {\n\t        return BEApi.storage = window.localStorage;\n\t    }\n\t}\n\n\tstatic set storage(storage) {\n\t\tthis._storage = storage;\n\t}\n\n\tstatic get xhr() {\n\t\treturn BEXhr.xhr;\n\t}\n\n\tstatic set xhr(xhr) {\n\t\tBEXhr.xhr = xhr;\n\t}\n\n\tconstructor(conf = {}) {\n\t\tvar opt = {\n\t\t\tbaseUrl: undefined,\n\t\t\taccessTokenKey: 'be_access_token',\n\t\t    refreshTokenKey: 'be_refresh_token',\n\t\t    accessTokenExpireDate: 'be_access_token_expire_date',\n\t\t}\n\n        for (var k in conf) {\n            opt[k] = conf[k];\n        }\n\n\t\tif (!opt.baseUrl) {\n\t\t\ttry {\n\t\t        opt.baseUrl = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port: '') + '/api/latest/';\n\t\t    } catch (ex) {\n\t\t        //\n\t    \t}\n\t\t}\n\n\t\tthis.conf = opt;\n\t\tBEApiRegistry.add(this.configKey, this.conf);\n\t}\n\n\tget defaultConfigKey() {\n\t\treturn 'default';\n\t}\n\n\tget configKey() {\n\t\treturn (this.conf && this.conf.configKey) || this.defaultConfigKey;\n\t}\n\n\t_getOptions(opt) {\n\t\tvar res = this.conf;\n\t\tfor (var k in opt) {\n            res[k] = opt[k];\n        }\n\t\tres['accessToken'] = this.getAccessToken();\n\n\t\tvar url = res.url || '/',\n\t\t\taccessToken = res.accessToken;\n\n\t\tif (/^([\\w\\-]+:)?\\/{2,3}/.test(url)) {\n\t\t\tif (url.indexOf(conf.baseUrl) !== 0) {\n\t\t\t\tthrow 'Invalid url';\n\t\t\t}\n\t\t} else {\n\t\t\tif (url[0] !== '/') {\n\t\t\t\turl = res.baseUrl + ((res.baseUrl[res.baseUrl.length - 1]) == '/' ? url : '/' + url);\n\t\t\t} else {\n\t\t\t\turl = res.baseUrl + ((res.baseUrl[res.baseUrl.length - 1]) == '/' ? url.slice(1) : url);\n\t\t\t}\n\t\t}\n\t\tres['url'] = url;\n\n\t\tif (accessToken) {\n\t\t\tres['headers'] = (res['headers'] && 'object' == typeof res['headers']) ? res['headers'] : {};\n\t\t\tres['headers']['Authorization'] = 'Bearer ' + accessToken;\n\t\t}\n\n\t\tres.type = res.method = res.type || res.method || 'GET';\n\n\t\treturn res;\n\t}\n\n\tsetBaseUrl(url) {\n\t\tthis.conf.baseUrl = url;\n\t}\n\n\tprocessXHR(conf = {}) {\n        if (this.getAccessToken() && this.isTokenExpired()) {\n            return new Promise(function(resolve, reject) {\n                var doXHR = function() {\n                    delete conf.headers['Authorization'];\n                    conf = this._getOptions(conf);\n                    BEXhr.exec(conf).then(function() {\n                        resolve.apply(this, arguments);\n                    }, function() {\n                        reject.apply(this, arguments);\n                    });\n                }\n                this.refreshToken().then(doXHR, doXHR);\n            });\n        } else {\n            return BEXhr.exec(conf);\n        }\n    }\n\n\tget(conf = {}) {\n        conf = processInput(conf);\n        conf.type = 'GET';\n        conf = this._getOptions(conf);\n        return this.processXHR(conf);\n    }\n\n    post(conf = {}, data) {\n        conf = processInput(conf);\n        conf.data = data ? _extend(conf.data || {}, data) : conf.data;\n        conf.type = 'POST';\n        conf = this._getOptions(conf);\n        return this.processXHR(conf);\n    }\n\n    put(conf = {}, data) {\n        conf = processInput(conf);\n        conf.data = data ? _extend(conf.data || {}, data) : conf.data;\n        conf.type = 'PUT';\n        conf = this._getOptions(conf);\n        return this.processXHR(conf);\n    }\n\n    delete(conf = {}) {\n        conf = processInput(conf);\n        conf.type = 'DELETE';\n        conf = this._getOptions(conf);\n        return this.processXHR(conf);\n    }\n\n\tprocessAuth(conf = {}) {\n        conf.url = 'auth';\n        var self = this,\n\t\t\tstorage = BEApi.storage,\n\t\t\topt = this.conf,\n\t\t\tpromise = this.post(conf);\n        promise.then(function(res) {\n            if (res && res.data && res.data.access_token) {\n                storage.setItem(opt.accessTokenKey, res.data.access_token);\n                storage.setItem(opt.refreshTokenKey, res.data.refresh_token);\n                storage.setItem(opt.accessTokenExpireDate, Date.now() + res.data.expires_in * 1000);\n            } else {\n                storage.removeItem(opt.accessTokenKey);\n                storage.removeItem(opt.refreshTokenKey);\n                storage.removeItem(opt.accessTokenExpireDate);\n            }\n        }, function() {\n            storage.removeItem(opt.accessTokenKey);\n            storage.removeItem(opt.refreshTokenKey);\n            storage.removeItem(opt.accessTokenExpireDate);\n        });\n        return promise;\n    }\n\n\tauth(user, pwd) {\n        var conf = {\n            data: {\n                username: user,\n                password: pwd\n            }\n        }\n        return this.processAuth(conf);\n    }\n\n    refreshToken() {\n\t\tvar storage = BEApi.storage,\n\t\t\topt = this.conf,\n        \tconf = {\n\t            data: {\n\t                grant_type: 'refresh_token',\n\t                refresh_token: this.getRefreshToken(),\n\t            }\n\t        }\n        storage.removeItem(opt.accessTokenKey);\n        storage.removeItem(opt.accessTokenExpireDate);\n        return this.processAuth(conf);\n    }\n\n    logout() {\n\t\tvar storage = BEApi.storage,\n\t\t\topt = this.conf,\n        \tpromise = this.delete({\n                url: 'auth/' + this.getRefreshToken()\n            });\n        storage.removeItem(opt.accessTokenKey);\n        storage.removeItem(opt.accessTokenExpireDate);\n\n        var onLogout = function(res) {\n            if (res && res.data && res.data.logout) {\n                storage.removeItem(opt.refreshTokenKey);\n            }\n        }\n        promise.then(onLogout, onLogout);\n        return promise;\n    }\n\n    getAccessToken() {\n        return BEApi.storage.getItem(this.conf.accessTokenKey);\n    }\n\n    getRefreshToken() {\n        return BEApi.storage.getItem(this.conf.refreshTokenKey);\n    }\n\n    getAccessTokenExpireDate() {\n        var data = BEApi.storage.getItem(this.conf.accessTokenExpireDate);\n        if (data) {\n            data = parseInt(data);\n            return new Date(data);\n        }\n    }\n\n    isTokenExpired() {\n        return new Date() >= this.getAccessTokenExpireDate();\n    }\n\n\tstatic extend(method, fn) {\n\t\tif (typeof fn == 'function' && typeof BEApi.prototype[method] == 'undefined') {\n\t\t\tBEApi.prototype[method] = fn;\n\t\t}\n\t}\n\n}\n","import { BEApi } from './beapi.next.js';\n\nvar noop = function () {}\n\nexport class BEApiQueue {\n\n\tget _queue() {\n\t\treturn this.__queue || [];\n\t}\n\n\tset _queue(ar) {\n\t\tif (Array.isArray(ar)) {\n\t\t\tthis.__queue = ar;\n\t\t}\n\t}\n\n\tconstructor(conf) {\n\t\tvar that = this;\n\t\tif (typeof conf === 'string') {\n\t\t\tthis.conf = BEApiRegistry.getInstance(conf);\n\t\t} else if (typeof conf === 'object') {\n\t\t\tthis.conf = conf;\n\t\t} else {\n\t\t\tthrow 'No BEApi configuration provided.'\n\t\t}\n\t\tthis._promise = new Promise(function (resolve, reject) {\n\t\t\tthat._resolver = resolve;\n\t\t\tthat._rejecter = reject;\n\t\t});\n\t\tthis._reset();\n\t}\n\n\t_add(task) {\n\t\ttask.push(new Promise(function (resolve, reject) {\n\t\t\ttask.push(resolve);\n\t\t\ttask.push(reject);\n\t\t}));\n\t\tthis._queue.push(task);\n\t}\n\n\t_reset() {\n\t\tthis._queue = [];\n\t}\n\n\texec() {\n\t\tvar self = this,\n\t\t\tqueue = this._queue,\n\t\t\tbeapi = new BEApi(this.conf),\n\t\t\tscope;\n\n\t\tif (queue.length == 0) {\n\t\t\tself._resolver(scope);\n\t\t} else {\n\t\t\tfunction _exec(queue, index) {\n\t\t\t\tindex = index || 0;\n\t\t\t\tif (index == queue.length) {\n\t\t\t\t\treturn self._resolver(scope);\n\t\t\t\t}\n\t\t\t\tvar task = queue[index],\n\t\t\t\t\tmethod = task[0],\n\t\t\t\t\targs = task[1],\n\t\t\t\t\tresolver = task[2],\n\t\t\t\t\trejecter = task[3],\n\t\t\t\t\tpromise = task[4],\n\t\t\t\t\tconfig = new BEApiQueue.tasks[method](...args);\n\n\t\t\t\tvar onLoad = function (res) {\n\t\t\t\t\tconfig.validate(res).then(function () {\n\t\t\t\t\t\tconfig.transform(scope, res).then(function (obj) {\n\t\t\t\t\t\t\tscope = obj;\n\t\t\t\t\t\t\tresolver(scope);\n\t\t\t\t\t\t\t_exec(queue, index + 1);\n\t\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\t\trejecter(scope);\n\t\t\t\t\t\t\tself._rejecter(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, function (err) {\n\t\t\t\t\t\tself._rejecter(err);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconfig.input.call(config, scope).then(function (options) {\n\t\t\t\t\tbeapi[config.type.toLowerCase()].apply(beapi, options).then(onLoad, onLoad);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t_exec(queue);\n\t\t}\n\t\treturn this._promise;\n\t}\n\n\tget() {\n\t\treturn this.exec();\n\t}\n\n\tthen(done, fail) {\n\t\tif (this._queue.length) {\n\t\t\treturn this._queue[this._queue.length - 1][4].then(done || noop, fail || noop);\n\t\t} else {\n\t\t\treturn this.all(done || noop, fail || noop);\n\t\t}\n\t}\n\n\tall(done, fail) {\n\t\tif (this._promise) {\n\t\t\treturn this._promise.then(done || noop, fail || noop);\n\t\t}\n\t}\n\n\tstatic register(taskName, def) {\n\t\tif (taskName && BEApiQueue._reserved.indexOf(taskName) !== -1) {\n\t\t\tthrow 'Reserved method';\n\t\t}\n\n\t\tBEApiQueue.tasks = BEApiQueue.tasks || {};\n\t\tBEApiQueue.tasks[taskName] = def;\n\n\t\t(function (method) {\n\t\t\tBEApiQueue.prototype[method] = function (...args) {\n\t\t\t\tthis._add([method, args]);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t})(taskName);\n\t}\n\n\tstatic get _reserved() {\n\t\treturn ['exec', 'get'];\n\t}\n}\n\nexport class BEApiQueueMethod {\n\n\tget type() {\n\t\treturn 'get';\n\t}\n\n\tconstructor(options = {}) {\n\t\tthis.options = options;\n\t}\n\n\tinput(scope, ...args) {\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve(args);\n\t\t});\n\t}\n\n\tvalidate(res) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (res && res.data && (!res.status || (res.status >= 200 && res.status < 300))) {\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t}\n\n\ttransform(scope, res) {\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve(scope);\n\t\t});\n\t}\n\n}\n","import './identity.next.js';\nimport './objects.next.js';\nimport './relation.next.js';\nimport './poster.next.js';\n","import { BEApiQueue, BEApiQueueMethod } from '../beapi.queue.next.js';\n\nexport class BEApiQueueIdentity extends BEApiQueueMethod {\n\n\tconstructor(data) {\n\t\tsuper({\n\t\t\tid: data.id,\n\t\t\tdata: data\n\t\t});\n\t}\n\n\tvalidate() {\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve();\n\t\t});\n\t}\n\n\tinput(scope) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve([\n\t\t\t\t{\n\t\t\t\t\turl: '/'\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t}\n\n\ttransform(scope, res) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tresolve(self.options.data);\n\t\t});\n\t}\n\n}\n\nBEApiQueue.register('identity', BEApiQueueIdentity);\n","import { BEApiQueue, BEApiQueueMethod } from '../beapi.queue.next.js';\n\nclass BEApiQueueObjects extends BEApiQueueMethod {\n\n\tconstructor(id, type) {\n\t\tsuper({\n\t\t\tid: id,\n\t\t\ttype: type\n\t\t});\n\t}\n\n\tinput(scope) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve([\n\t\t\t\t{\n\t\t\t\t\turl: (self.options.type ? self.options.type + 's' : 'objects') + (self.options.id ? '/' + self.options.id : '')\n\t\t\t\t}\n\t\t\t]);\n\t\t})\n\t}\n\n\ttransform(scope, res) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (res.data.object) {\n\t\t\t\tscope = res.data.object;\n\t\t\t}\n\t\t\tresolve(scope);\n\t\t});\n\t}\n\n}\n\nBEApiQueue.register('objects', BEApiQueueObjects);\n","import { BEApiQueue, BEApiQueueMethod } from '../beapi.queue.next.js';\n\nclass BEApiQueuePoster extends BEApiQueueMethod {\n\n\tconstructor(options = {}) {\n\t\tsuper(options);\n\t}\n\n\tinput(scope) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve) {\n\t\t\tvar suffix = '';\n\t\t\tif (self.options) {\n\t\t\t\tsuffix = '?';\n\t\t\t\tfor (var k in self.options) {\n\t\t\t\t\tsuffix += k + '=' + self.options[k];\n\t\t\t\t}\n\t\t\t}\n\t\t\tresolve([\n\t\t\t\t{\n\t\t\t\t\turl: 'poster/' + scope.id + suffix\n\t\t\t\t}\n\t\t\t]);\n\t\t})\n\t}\n\n\ttransform(scope, res) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (res && res.data) {\n\t\t\t\tscope['poster'] = res.data;\n\t\t\t}\n\t\t\tresolve(scope);\n\t\t});\n\t}\n\n}\n\nBEApiQueue.register('poster', BEApiQueuePoster);\n","import { BEApiQueue, BEApiQueueMethod } from '../beapi.queue.next.js';\n\nclass BEApiQueueRelation extends BEApiQueueMethod {\n\n\tconstructor(relName) {\n\t\tsuper({\n\t\t\trelName: relName\n\t\t});\n\t}\n\n\tinput(scope) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve([\n\t\t\t\t{\n\t\t\t\t\turl: 'objects/' + scope.id + '/relations/' + self.options.relName\n\t\t\t\t}\n\t\t\t]);\n\t\t})\n\t}\n\n\ttransform(scope, res) {\n\t\tvar self = this;\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tscope['relations'] = scope['relations'] || {};\n\t\t\tscope['relations'][self.options.relName] = scope['relations'][self.options.relName] || {};\n\t\t\tscope['relations'][self.options.relName].objects = res.data.objects;\n\t\t\tresolve(scope);\n\t\t});\n\t}\n\n}\n\nBEApiQueue.register('relation', BEApiQueueRelation);\n"]}